<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Proyecto</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles.css">
    <script>
        function toggleList() {
            var selection = document.getElementById("roleSelect").value;
            var engineerList = document.getElementById("engineerList");
            var userList = document.getElementById("userList");
            
            if (selection === "Ingeniero") {
                engineerList.style.display = "block";
                userList.style.display = "none";
            } else if (selection === "Usuario") {
                engineerList.style.display = "none";
                userList.style.display = "block";
            } else {
                engineerList.style.display = "none";
                userList.style.display = "none";
            }
        }

        function redirectBasedOnSelection() {
            var role = document.getElementById("roleSelect").value;
            var engineer = document.getElementById("engineerSelect").value;
            var user = document.getElementById("userSelect").value;

            if (role === "Ingeniero" && engineer) {
                window.location.href = "ingeniero.html";  
            } else if (role === "Usuario" && user) {
                window.location.href = "usuario.html";  
            } else {
                alert("Por favor, seleccione un rol y una opción de la lista.");
            }
        }
    </script>
</head>
<body onload="toggleList()">
    <div class="container">
        <div class="center-box">
            <h1 class="text-center">
                <i class="fa fa-ticket icon"></i>
                Asignación de tickets
            </h1>
            <p class="text-center" th:text="${message}">Mensaje por defecto</p>
            
            <div class="form-group">
                <label for="roleSelect">Selecciona un rol:</label>
                <select class="form-control" id="roleSelect" name="roleSelect" onchange="toggleList()">
                    <option value="">Selecciona...</option>
                    <option value="Ingeniero">Ingeniero</option>
                    <option value="Usuario">Usuario</option>
                </select>
            </div>

            <div id="engineerList" class="form-group" style="display:none;">
                <label for="engineerSelect">Selecciona un ingeniero:</label>
                <select class="form-control" id="engineerSelect" name="engineerSelect">
                    <option th:each="engineer : ${engineers}" th:text="${engineer}">Ingeniero por defecto</option>
                </select>
            </div>

            <div id="userList" class="form-group" style="display:none;">
                <label for="userSelect">Selecciona un usuario:</label>
                <select class="form-control" id="userSelect" name="userSelect">
                    <option th:each="user : ${users}" th:text="${user}">Usuario por defecto</option>
                </select>
            </div>

            <button class="btn btn-block" onclick="window.location.href='crear_usuario.html'">Crear Usuario</button>
            <button class="btn btn-block" onclick="window.location.href='crear_ingeniero.html'">Crear Ingeniero</button>
            <button class="btn btn-block" onclick="redirectBasedOnSelection()">Ingresar</button>
        </div>
    </div>
</body>
</html>
